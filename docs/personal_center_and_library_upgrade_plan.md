# 个人中心与文献管理升级计划

> 更新时间：2025-09-19  
> 负责人：前端体验小组、后端数据服务组

## 1. 背景

近期针对公网体验的修复已初步上线：
- 新增个人中心页面，支持资料维护、密码修改与使用概览。
- 文献库加入详情抽屉，可查看元数据、被引与参考列表。

为了满足测试团队和真实用户的深度使用场景，仍需按阶段补齐下列能力。

## 2. 目标

1. **个人中心**：提供完备的账号自助能力（通知、登录历史、会员管理）。
2. **文献管理**：实现多维筛选、批量操作和研究链路追踪。
3. **布局体验**：修复侧边栏与内容区重叠问题，统一多端排版。

## 3. 阶段规划

### Phase A · 账号洞察（1 周）
- 个人中心新增 "活动日志" 模块，展示最近 20 次登录 IP、设备、时间。
- 集成通知中心：显示任务完成、模型失败、会员到期提醒。
- 支持头像上传与裁剪，打通 `/api/user/profile/avatar` 接口。
- 后端补充 `GET /api/user/security-events`，落库安全事件。

### Phase B · 文献精细管理（2 周）
- 多条件筛选：年份范围、标签、来源、解析状态（前端使用 `Form` + `Drawer`）。
- 批量操作：收藏、归档、标签设置、导出 CSV；提供后端批处理 API。
- 文献关系图：在详情抽屉新增 citation graph 展示（使用 `force-graph`）。
- 任务联动：在文献详情中显示关联任务与抽取结果（调用 `/api/tasks/literature/{id}`）。

### Phase C · 布局统一（1 周）
- 侧边栏：实现固定宽度 + 内容区域 `padding-left`，避免重叠。
- 移动端：抽屉菜单增加半透明遮罩与手势关闭，表单改为纵向布局。
- 全局背景：将渐变背景移至 `AppLayout`，各页面改用透明卡片以减小叠影。
- 文档补充：更新《设计系统指南》，同步Tailwind断点策略。

## 4. 交付件

| 阶段 | 组件/接口 | 测试要求 |
| --- | --- | --- |
| Phase A | `PersonalActivityLog`, `/api/user/security-events` | Jest 单测 + Playwright 登录安全用例 |
| Phase B | `LibraryAdvancedFilter`, `/api/literature/batch` | API 回归 + 文献批处理端到端脚本 |
| Phase C | `AppLayout`、`ProjectListPage`、`LibraryPage` | `npm run lint` + `Lighthouse` 移动端评分 >= 80 |

## 5. 风险与依赖

- **ResearchRabbit API 配额**：被引/参考查询高峰可能触发限流；需评估缓存策略。
- **安全日志数据量**：需在 MySQL 建立按月分表或 TTL 任务。
- **布局修改影响范围广**：须在 QA 环境做全分辨率回归，并截取基线截图。

## 6. 验收标准

- 个人中心提供近 7 天安全事件、支持导出 CSV。
- 文献库可在 1 秒内应用组合筛选，并支持批量收藏。
- 桌面端内容区不再与侧边栏重叠，移动端 375px 视口无横向滚动。

---
如需调整优先级或人力，请在项目例会上评估并更新本文档。
